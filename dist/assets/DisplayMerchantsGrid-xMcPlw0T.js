import{r as c,Y as A,Z as x,M,j as t,a7 as k,N as D,a6 as F}from"./index-DwXd4TTA.js";import{u as I,A as E,a as N}from"./ApiConstants-B3vWYKSo.js";import{B as f,T as z,M as O,D as P}from"./MUIThemeProvider-Upu1qkYL.js";import{A as K}from"./AppChipComponent-LPE-MC8O.js";import{T as R}from"./Text-BaOLMAxN.js";import{R as j}from"./Rating-BZxZswsB.js";import"./DateTimePicker-Dn1tq8m7.js";import"./index.esm-DDE4z3sI.js";import"./Alert-BVxpVNY2.js";function g(a){return x(a,"DD MMM YYYY hh:mm A").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")}const Y=a=>{let r={};return a==null||a.forEach(l=>{var e;Array.isArray(l.value)?r[l.id]=(e=l.value)==null?void 0:e.join(","):r[l.id]=l.value}),r},W=a=>{var n,s;let r="";const l=(n=a==null?void 0:a[0])==null?void 0:n.id,e=(s=a==null?void 0:a[0])==null?void 0:s.desc;if(l==="merchantName"&&!e?r="ascName":l==="merchantName"&&e?r="descName":l==="registrationDate"&&!e?r="ascRegistrationDate":l==="registrationDate"&&e&&(r="descRegistrationDate"),r)return{sort:r}},w=a=>{let r="",l="";const e=a==null?void 0:a.find(n=>n.id==="registrationDate");if(e&&Array.isArray(e==null?void 0:e.value)&&(r=e!=null&&e.value[0]?g(e==null?void 0:e.value[0]):"",l=e!=null&&e.value[1]?g(e==null?void 0:e.value[1]):""),r||l)return{startDate:r,endDate:l}};function V(a,r,l){const e={pageNo:l.pageIndex+1,limit:l.pageSize,...W(r),...Y(a),...w(a)};return E.GET(N.GET_MERCHANT_DETAILS(),{params:e})}const B=a=>{const{columnFilters:r,EnableQuery:l,sorting:e,pagination:n}=a,[s,d]=c.useState([]);return c.useEffect(()=>{l&&d(r)},[r,l]),I({queryKey:["Merchants-Grid-data",s,e,n],queryFn:()=>V(s,e,n),placeholderData:A,refetchOnMount:!1,refetchOnWindowFocus:!1,retry:2})},L=[{key:"merchantId",name:"merchantId",fieldType:"Number",label:"Merchant ID",disabled:{disabledFieldForNew:!1,disableFieldForEdit:!0},hidden:{hideFieldForEDIT:!1,hideFieldForNEW:!0}},{key:"merchantName",name:"merchantName",fieldType:"Text",label:"Merchant Name"},{key:"merchantEmail",name:"merchantEmail",fieldType:"Text",label:"Email"},{key:"merchantMobile",name:"merchantMobile",fieldType:"Text",label:"Mobile"},{key:"merchantAddress",name:"merchantAddress",fieldType:"Text",label:"Address"},{key:"merchantArea",name:"merchantArea",fieldType:"Text",label:"Area"},{key:"merchantPost",name:"merchantPost",fieldType:"Text",label:"Postal Code"},{key:"deliveryOrdersComission",name:"deliveryOrdersComission",fieldType:"Number",label:"Delivery Orders Commission"},{key:"collectionOrdersComission",name:"collectionOrdersComission",fieldType:"Number",label:"Collection Orders Commission"},{key:"eatInComission",name:"eatInComission",fieldType:"Number",label:"Eat-In Commission"},{key:"logoImg",name:"logoImg",fieldType:"imageInput",label:"Logo Image"},{key:"registrationDate",name:"registrationDate",fieldType:"DateTimeRange",label:"Registration Date",disabled:{disabledFieldForNew:!1,disableFieldForEdit:!0}},{key:"registrationMethod",name:"registrationMethod",fieldType:"Select",label:"Registration Method",meta:{options:[{label:"Online",value:"Online"},{label:"Web",value:"Web"}]}},{key:"zone",name:"zone",fieldType:"Select",label:"Zone",meta:{options:[{label:"Chester",value:"Chester"},{label:"Manchester",value:"Manchester"},{label:"Birmingham",value:"Birmingham"},{label:"Wrexham",value:"Wrexham"},{label:"Ellesmere Port",value:"Ellesmere Port"},{label:"Mold",value:"Mold"},{label:"London",value:"London"},{label:"Birkenhead",value:"Birkenhead"},{label:"Wirral",value:"Wirral"}]}},{key:"serviceFeeApplicable",name:"serviceFeeApplicable",fieldType:"Checkbox",label:"Service Fee Applicable"},{key:"deliveryChargeApplicable",name:"deliveryChargeApplicable",fieldType:"Checkbox",label:"Delivery Charge Applicable"},{key:"driverTipApplicable",name:"driverTipApplicable",fieldType:"Checkbox",label:"Driver Tip Applicable"},{key:"isActive",name:"isActive",fieldType:"Checkbox",label:"Is Active"},{key:"taxRate",name:"taxRate",fieldType:"Number",label:"Tax Rate"},{key:"rating",name:"rating",fieldType:"Rating",label:"Rating"}],ee=()=>{var b,p;const[a,r]=c.useState([]),[l,e]=c.useState([]),[n,s]=c.useState({pageIndex:0,pageSize:10}),[d,{open:h,close:v}]=M(!1),{data:m,isError:S,isLoading:C}=B({columnFilters:a,EnableQuery:!d,sorting:l,pagination:n}),T=c.useMemo(()=>[{accessorKey:"merchantId",header:"Merchant ID",enableSorting:!1,maxSize:20,Cell:({cell:i,row:o})=>t.jsxs(f,{sx:{display:"flex",gap:"1rem",alignItems:"center",justifyContent:"center"},children:[t.jsx(R,{style:{cursor:"pointer"},children:i.getValue()}),t.jsx(z,{title:"View Merchant Details",placement:"top",children:t.jsx(k,{to:`/merchant/${i.getValue()}/dashboard`,style:{textDecoration:"none"},children:t.jsx(D,{color:"green"})})})]})},{accessorKey:"merchantName",header:"Merchant Name",enableSorting:!0,maxSize:50},{accessorKey:"merchantEmail",header:"Email",enableSorting:!1,maxSize:100},{accessorKey:"merchantMobile",header:"Mobile",enableSorting:!1,maxSize:30},{accessorKey:"merchantAddress",header:"Address",enableSorting:!1,enableColumnFilter:!1,maxSize:200,Cell:({cell:i,row:o})=>{var u,y;return t.jsx(f,{sx:G=>({whiteSpace:"normal",wordWrap:"break-word",maxWidth:"200px",overflowWrap:"break-word"}),children:i.getValue()+" "+((u=o.original)==null?void 0:u.merchantArea)+" "+((y=o==null?void 0:o.original)==null?void 0:y.merchantPost)})}},{accessorKey:"registrationDate",header:"Registration Date",enableSorting:!0,accessorFn:i=>new Date(i.registrationDate),filterVariant:"datetime-range",Cell:({cell:i})=>{const o=i.getValue();return x(o).format("DD MMM YYYY hh:mm A")},muiFilterDateTimePickerProps:{label:"Registration Date",timeSteps:{minutes:1}},maxSize:50},{accessorKey:"zone",header:"Zone",enableSorting:!1,maxSize:30,filterVariant:"multi-select",filterSelectOptions:[{label:"Chester",value:"Chester"},{label:"Manchester",value:"Manchester"},{label:"Birmingham",value:"Birmingham"},{label:"Wrexham",value:"Wrexham"},{label:"Ellesmere Port",value:"Ellesmere Port"},{label:"Mold",value:"Mold"},{label:"London",value:"London"},{label:"Birkenhead",value:"Birkenhead"},{label:"Wirral",value:"Wirral"}]},{accessorKey:"serviceFeeApplicable",header:"Service Fee Applicable",enableSorting:!1,maxSize:30,Cell:({cell:i})=>i.getValue()?"Yes":"No",enableColumnFilter:!1},{accessorKey:"deliveryChargeApplicable",header:"Delivery Charge Applicable",enableSorting:!1,maxSize:30,Cell:({cell:i})=>i.getValue()?"Yes":"No",enableColumnFilter:!1},{accessorKey:"driverTipApplicable",header:"Driver Tip Applicable",enableSorting:!1,maxSize:30,Cell:({cell:i})=>i.getValue()?"Yes":"No",enableColumnFilter:!1},{accessorKey:"deliveryOrdersComission",header:"Delivery Orders Commission (%)",enableSorting:!1,maxSize:220,enableColumnFilter:!1},{accessorKey:"collectionOrdersComission",header:"Collection Orders Commission (%)",enableSorting:!1,maxSize:220,enableColumnFilter:!1},{accessorKey:"eatInComission",header:"Eat-In Commission (%)",enableSorting:!1,maxSize:220,enableColumnFilter:!1},{accessorKey:"taxRate",header:"Tax Rate",enableSorting:!1,maxSize:30,enableColumnFilter:!1},{accessorKey:"totalOrders",header:"Total Orders",enableSorting:!1,maxSize:30,enableColumnFilter:!1},{accessorKey:"isActive",header:"Is Active",enableSorting:!1,maxSize:30,filterVariant:"checkbox",muiFilterCheckboxProps:{size:"large"},Cell:({cell:i})=>t.jsx(K,{value:i.getValue()?"Active":"Inactive"})},{accessorKey:"rating",header:"Rating",enableSorting:!1,maxSize:30,Cell:({cell:i})=>t.jsx(j,{value:i.getValue(),readOnly:!0})}],[]);return t.jsx(O,{children:t.jsx(c.Suspense,{fallback:t.jsx(F,{height:300,width:"100%"}),children:t.jsx(P,{data:((b=m==null?void 0:m.data)==null?void 0:b.merchant)??[],columnFilters:a,columns:T,pagination:n,sorting:l,totalRowCount:((p=m==null?void 0:m.data)==null?void 0:p.totalCount)??0,onColumnFiltersChange:r,onPaginationChange:s,onSortingChange:e,isLoading:C,OnFilterButtonClicked:()=>h(),OnApplyFiltersClicked:()=>v(),filterDrawerIsOpen:d,enableRowSelection:!0,isError:S,tableName:"MerchantsDisplay",crudOperationHeader:"Merchant",columnPinning:{left:["mrt-row-select","mrt-row-actions","merchantId"]},uniqueIDForRows:"merchantId",uiSchema:L})})})};export{ee as default};
